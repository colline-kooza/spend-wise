{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "zustand-cart",
  "type": "registry:ui",
  "title": "Zustand Cart",
  "description": "A complete e-commerce shopping cart component with product listing, cart management",
  "dependencies": [
    "lucide-react",
    "zustand"
  ],
  "registryDependencies": [
    "button",
    "card"
  ],
  "files": [
    {
      "path": "src/registry/cart/zustand-cart.tsx",
      "content": "\"use client\";\r\n\r\nimport { Heart, Minus, Plus, ShoppingCart, X } from \"lucide-react\";\r\nimport Image from \"next/image\";\r\nimport Link from \"next/link\";\r\nimport { useState } from \"react\";\r\nimport { create } from \"zustand\";\r\nimport { createJSONStorage, persist } from \"zustand/middleware\";\r\n\r\nimport { Button } from \"@/components/ui/button\";\r\n\r\n// Types\r\ninterface Product {\r\n  id: string;\r\n  name: string;\r\n  description: string;\r\n  price: number;\r\n  image: string;\r\n  categoryId?: string;\r\n}\r\n\r\ninterface CartItem extends Product {\r\n  quantity: number;\r\n}\r\n\r\ninterface CartState {\r\n  items: CartItem[];\r\n  addToCart: (product: Product) => void;\r\n  incrementQuantity: (productId: string) => void;\r\n  decrementQuantity: (productId: string) => void;\r\n  removeFromCart: (productId: string) => void;\r\n  getCartTotalItems: () => number;\r\n  getCartTotalPrice: () => number;\r\n  clearCart: () => void;\r\n}\r\n\r\n// Sample product data with Unsplash images\r\nconst sampleProducts: Product[] = [\r\n  {\r\n    id: \"1\",\r\n    name: \"Premium Headphones\",\r\n    description:\r\n      \"Noise-cancelling wireless headphones with exceptional sound quality and comfort.\",\r\n    price: 199.99,\r\n    image:\r\n      \"https://images.unsplash.com/photo-1505740420928-5e560c06d30e?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80\",\r\n    categoryId: \"electronics\",\r\n  },\r\n  {\r\n    id: \"2\",\r\n    name: \"Smart Watch Series 5\",\r\n    description:\r\n      \"Advanced smartwatch with health monitoring, GPS, and long battery life.\",\r\n    price: 249.99,\r\n    image:\r\n      \"https://images.unsplash.com/photo-1523275335684-37898b6baf30?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80\",\r\n    categoryId: \"electronics\",\r\n  },\r\n  {\r\n    id: \"3\",\r\n    name: \"Designer Backpack\",\r\n    description:\r\n      \"Durable and stylish backpack with multiple compartments and laptop sleeve.\",\r\n    price: 89.99,\r\n    image:\r\n      \"https://images.unsplash.com/photo-1553062407-98eeb64c6a62?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80\",\r\n    categoryId: \"fashion\",\r\n  },\r\n];\r\n\r\n// Zustand store for cart management\r\nexport const useCartStore = create<CartState>()(\r\n  persist(\r\n    (set, get) => ({\r\n      items: [],\r\n      addToCart: (product) => {\r\n        set((state) => {\r\n          const existingItem = state.items.find(\r\n            (item) => item.id === product.id\r\n          );\r\n          if (existingItem) {\r\n            return {\r\n              items: state.items.map((item) =>\r\n                item.id === product.id\r\n                  ? { ...item, quantity: item.quantity + 1 }\r\n                  : item\r\n              ),\r\n            };\r\n          } else {\r\n            return {\r\n              items: [...state.items, { ...product, quantity: 1 }],\r\n            };\r\n          }\r\n        });\r\n      },\r\n      incrementQuantity: (productId) => {\r\n        set((state) => ({\r\n          items: state.items.map((item) =>\r\n            item.id === productId\r\n              ? { ...item, quantity: item.quantity + 1 }\r\n              : item\r\n          ),\r\n        }));\r\n      },\r\n      decrementQuantity: (productId) => {\r\n        set((state) => ({\r\n          items: state.items\r\n            .map((item) =>\r\n              item.id === productId\r\n                ? { ...item, quantity: Math.max(0, item.quantity - 1) }\r\n                : item\r\n            )\r\n            .filter((item) => item.quantity > 0),\r\n        }));\r\n      },\r\n      removeFromCart: (productId) => {\r\n        set((state) => ({\r\n          items: state.items.filter((item) => item.id !== productId),\r\n        }));\r\n      },\r\n      getCartTotalItems: () => {\r\n        return get().items.reduce((total, item) => total + item.quantity, 0);\r\n      },\r\n      getCartTotalPrice: () => {\r\n        return get().items.reduce(\r\n          (total, item) => total + item.price * item.quantity,\r\n          0\r\n        );\r\n      },\r\n      clearCart: () => {\r\n        set({ items: [] });\r\n      },\r\n    }),\r\n    {\r\n      name: \"ecommerce-cart-storage\",\r\n      storage: createJSONStorage(() => localStorage),\r\n    }\r\n  )\r\n);\r\n\r\n// Product Card Component\r\ninterface ProductCardProps {\r\n  product: Product;\r\n  showCategory?: boolean;\r\n}\r\n\r\nfunction ProductCard({ product, showCategory = false }: ProductCardProps) {\r\n  const addToCart = useCartStore((state) => state.addToCart);\r\n\r\n  return (\r\n    <div className=\"group overflow-hidden rounded-lg bg-white shadow-md transition-all duration-300 hover:shadow-xl\">\r\n      <Link href={`/products/${product.id}`}>\r\n        <div className=\"relative h-48 overflow-hidden\">\r\n          <Image\r\n            src={product.image}\r\n            alt={product.name}\r\n            width={500}\r\n            height={500}\r\n            className=\"h-full w-full object-cover transition-transform duration-300 group-hover:scale-105\"\r\n          />\r\n\r\n          {/* Quick actions overlay */}\r\n          <div className=\"absolute top-4 right-4 opacity-0 transition-opacity duration-300 group-hover:opacity-100\">\r\n            <button className=\"rounded-full bg-white p-2 shadow-md transition-colors hover:bg-gray-50\">\r\n              <Heart className=\"h-4 w-4 text-gray-600\" />\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </Link>\r\n\r\n      <div className=\"p-4\">\r\n        <Link href={`/products/${product.id}`}>\r\n          <h3 className=\"mb-2 line-clamp-2 text-lg font-semibold text-gray-900 transition-colors group-hover:text-blue-600\">\r\n            {product.name}\r\n          </h3>\r\n        </Link>\r\n\r\n        <p className=\"mb-3 line-clamp-2 text-sm text-gray-600\">\r\n          {product.description}\r\n        </p>\r\n\r\n        <div className=\"flex items-center justify-between\">\r\n          <span className=\"text-xl font-bold text-green-600\">\r\n            ${product.price.toFixed(2)}\r\n          </span>\r\n\r\n          <Button\r\n            size=\"sm\"\r\n            className=\"flex items-center gap-2\"\r\n            onClick={(e) => {\r\n              e.preventDefault();\r\n              addToCart(product);\r\n            }}\r\n          >\r\n            <ShoppingCart className=\"h-4 w-4\" />\r\n            Add to Cart\r\n          </Button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// Cart Component\r\nfunction Cart() {\r\n  const {\r\n    items,\r\n    incrementQuantity,\r\n    decrementQuantity,\r\n    removeFromCart,\r\n    getCartTotalPrice,\r\n    clearCart,\r\n  } = useCartStore();\r\n\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const totalItems = useCartStore((state) => state.getCartTotalItems());\r\n  const totalPrice = getCartTotalPrice();\r\n\r\n  const handleCheckout = () => {\r\n    alert(`Proceeding to checkout with total: $${totalPrice.toFixed(2)}`);\r\n    // Here you would integrate with PesaPal or other payment gateway\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed right-4 bottom-4 z-50\">\r\n      {/* Cart Toggle Button */}\r\n      <button\r\n        onClick={() => setIsOpen(!isOpen)}\r\n        className=\"relative rounded-full bg-blue-600 p-4 text-white shadow-lg transition-colors hover:bg-blue-700\"\r\n      >\r\n        <ShoppingCart className=\"h-6 w-6\" />\r\n        {totalItems > 0 && (\r\n          <span className=\"absolute -top-1 -right-1 flex h-5 w-5 items-center justify-center rounded-full bg-red-500 text-xs text-white\">\r\n            {totalItems}\r\n          </span>\r\n        )}\r\n      </button>\r\n\r\n      {/* Cart Panel */}\r\n      {isOpen && (\r\n        <div className=\"absolute right-0 bottom-16 flex max-h-96 w-80 flex-col overflow-hidden rounded-lg border border-gray-200 bg-white shadow-xl\">\r\n          <div className=\"flex items-center justify-between border-b border-gray-200 p-4\">\r\n            <h3 className=\"text-lg font-semibold\">\r\n              Your Cart ({totalItems} items)\r\n            </h3>\r\n            <button\r\n              onClick={() => setIsOpen(false)}\r\n              className=\"text-gray-500 hover:text-gray-700\"\r\n            >\r\n              <X className=\"h-5 w-5\" />\r\n            </button>\r\n          </div>\r\n\r\n          <div className=\"flex-1 overflow-y-auto p-4\">\r\n            {items.length === 0 ? (\r\n              <p className=\"py-8 text-center text-gray-500\">\r\n                Your cart is empty\r\n              </p>\r\n            ) : (\r\n              <div className=\"space-y-4\">\r\n                {items.map((item) => (\r\n                  <div\r\n                    key={item.id}\r\n                    className=\"flex items-center justify-between border-b pb-3\"\r\n                  >\r\n                    <div className=\"flex items-center space-x-3\">\r\n                      <img\r\n                        src={item.image}\r\n                        alt={item.name}\r\n                        className=\"h-12 w-12 rounded object-cover\"\r\n                      />\r\n                      <div>\r\n                        <h4 className=\"line-clamp-1 text-sm font-medium\">\r\n                          {item.name}\r\n                        </h4>\r\n                        <p className=\"font-semibold text-green-600\">\r\n                          ${item.price.toFixed(2)}\r\n                        </p>\r\n                      </div>\r\n                    </div>\r\n\r\n                    <div className=\"flex items-center space-x-2\">\r\n                      <button\r\n                        onClick={() => decrementQuantity(item.id)}\r\n                        className=\"rounded-full bg-gray-100 p-1 hover:bg-gray-200\"\r\n                      >\r\n                        <Minus className=\"h-3 w-3\" />\r\n                      </button>\r\n\r\n                      <span className=\"text-sm font-medium\">\r\n                        {item.quantity}\r\n                      </span>\r\n\r\n                      <button\r\n                        onClick={() => incrementQuantity(item.id)}\r\n                        className=\"rounded-full bg-gray-100 p-1 hover:bg-gray-200\"\r\n                      >\r\n                        <Plus className=\"h-3 w-3\" />\r\n                      </button>\r\n\r\n                      <button\r\n                        onClick={() => removeFromCart(item.id)}\r\n                        className=\"ml-2 p-1 text-red-500 hover:text-red-700\"\r\n                      >\r\n                        <X className=\"h-4 w-4\" />\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {items.length > 0 && (\r\n            <div className=\"border-t border-gray-200 p-4\">\r\n              <div className=\"mb-4 flex items-center justify-between\">\r\n                <span className=\"font-semibold\">Total:</span>\r\n                <span className=\"text-xl font-bold text-green-600\">\r\n                  ${totalPrice.toFixed(2)}\r\n                </span>\r\n              </div>\r\n\r\n              <div className=\"flex space-x-2\">\r\n                <Button\r\n                  variant=\"outline\"\r\n                  className=\"flex-1\"\r\n                  onClick={clearCart}\r\n                >\r\n                  Clear Cart\r\n                </Button>\r\n                <Button\r\n                  className=\"flex-1 bg-green-600 hover:bg-green-700\"\r\n                  onClick={handleCheckout}\r\n                >\r\n                  Pay Now\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\n// Main PesaPalCart Component\r\nexport default function PesaPalCart() {\r\n  return (\r\n    <div className=\"container mx-auto px-4 py-8\">\r\n      <h2 className=\"mb-8 text-center text-3xl font-bold\">Featured Products</h2>\r\n\r\n      <div className=\"container mx-auto mb-12 grid max-w-4xl grid-cols-1 gap-6 md:grid-cols-2 lg:grid-cols-3\">\r\n        {sampleProducts.map((product) => (\r\n          <ProductCard key={product.id} product={product} showCategory={true} />\r\n        ))}\r\n      </div>\r\n\r\n      <Cart />\r\n    </div>\r\n  );\r\n}\r\n",
      "type": "registry:component"
    }
  ]
}